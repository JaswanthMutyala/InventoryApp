{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/inventory-app/app/inventory/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function InventoryPage() {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState(null);\r\n    const [products, setProducts] = useState([]);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [currentProduct, setCurrentProduct] = useState(null);\r\n    const [formData, setFormData] = useState({ name: '', description: '', quantity: 0, image_url: '' });\r\n    const [deleteConfirm, setDeleteConfirm] = useState({ show: false, productId: null, productName: '' });\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const [imagePreview, setImagePreview] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const storedUser = localStorage.getItem('user');\r\n        if (!storedUser) router.push('/login');\r\n        else {\r\n            setUser(JSON.parse(storedUser));\r\n            fetchProducts();\r\n        }\r\n    }, [router]);\r\n\r\n    const fetchProducts = async () => {\r\n        const res = await fetch('/api/products');\r\n        const data = await res.json();\r\n        setProducts(data);\r\n    };\r\n\r\n    const isAdmin = user?.role === 'admin';\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const url = isEditing ? `/api/products/${currentProduct.id}` : '/api/products';\r\n        const method = isEditing ? 'PUT' : 'POST';\r\n\r\n        const res = await fetch(url, {\r\n            method,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ ...formData, user_id: user.id }),\r\n        });\r\n\r\n        if (res.ok) {\r\n            fetchProducts();\r\n            setIsEditing(false);\r\n            setCurrentProduct(null);\r\n            setFormData({ name: '', description: '', quantity: 0, image_url: '' });\r\n        } else {\r\n            const error = await res.json();\r\n            alert(error.error || 'Failed to save product');\r\n        }\r\n    };\r\n\r\n    const handleEdit = (product) => {\r\n        setIsEditing(true);\r\n        setCurrentProduct(product);\r\n        setFormData({ ...product });\r\n    };\r\n\r\n    const handleDeleteClick = (product) => {\r\n        setDeleteConfirm({ show: true, productId: product.id, productName: product.name });\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        if (!deleteConfirm.productId) return;\r\n        \r\n        setIsDeleting(true);\r\n        try {\r\n            const res = await fetch(`/api/products/${deleteConfirm.productId}`, {\r\n                method: 'DELETE',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ user_id: user.id }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                fetchProducts();\r\n                setDeleteConfirm({ show: false, productId: null, productName: '' });\r\n            } else {\r\n                const error = await res.json();\r\n                alert(error.error || 'Failed to delete product');\r\n            }\r\n        } catch (err) {\r\n            alert('Error: ' + err.message);\r\n        } finally {\r\n            setIsDeleting(false);\r\n        }\r\n    };\r\n\r\n    const cancelDelete = () => {\r\n        setDeleteConfirm({ show: false, productId: null, productName: '' });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h1 className=\"section-title\">Inventory Management</h1>\r\n                <div className=\"badge badge-primary\">\r\n                    {isAdmin ? 'Admin' : 'Member'}\r\n                </div>\r\n            </div>\r\n\r\n            {isAdmin && (\r\n                <div className=\"card mb-6\">\r\n                    <h2 className=\"text-lg font-semibold mb-4\">{isEditing ? 'Edit Product' : 'Add New Product'}</h2>\r\n                    <form onSubmit={handleSubmit} className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                className=\"input\"\r\n                                placeholder=\"Product Name\"\r\n                                value={formData.name}\r\n                                onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                className=\"input\"\r\n                                placeholder=\"Description\"\r\n                                value={formData.description}\r\n                                onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                className=\"input\"\r\n                                placeholder=\"Quantity\"\r\n                                value={formData.quantity}\r\n                                onChange={e => setFormData({ ...formData, quantity: parseInt(e.target.value) || 0 })}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                className=\"input\"\r\n                                placeholder=\"Image URL (optional)\"\r\n                                value={formData.image_url}\r\n                                onChange={e => setFormData({ ...formData, image_url: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex gap-2\" style={{ gridColumn: '1 / -1' }}>\r\n                            <button type=\"submit\" className=\"btn btn-primary\">{isEditing ? 'Update' : 'Add'} Product</button>\r\n                            {isEditing && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-secondary\"\r\n                                    onClick={() => { setIsEditing(false); setCurrentProduct(null); setFormData({ name: '', description: '', quantity: 0, image_url: '' }); }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid gap-4\">\r\n                {products.map(product => (\r\n                    <div key={product.id} className=\"card\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"font-bold text-lg\">{product.name}</h3>\r\n                                <p className=\"text-sm text-secondary\">{product.description}</p>\r\n                                <p className=\"text-sm mt-2\">\r\n                                    Quantity: <span className=\"font-bold text-primary\">{product.quantity}</span>\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                {isAdmin && (\r\n                                    <>\r\n                                        <button onClick={() => handleEdit(product)} className=\"btn btn-secondary\">Edit</button>\r\n                                        <button onClick={() => handleDeleteClick(product)} className=\"btn btn-danger\" disabled={isDeleting}>Delete</button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Delete Confirmation Dialog */}\r\n            {deleteConfirm.show && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 1000,\r\n                }}>\r\n                    <div style={{\r\n                        backgroundColor: 'white',\r\n                        borderRadius: '8px',\r\n                        padding: '30px',\r\n                        boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3)',\r\n                        maxWidth: '400px',\r\n                        width: '90%',\r\n                        textAlign: 'center',\r\n                    }}>\r\n                        <h2 style={{ marginBottom: '20px', color: '#1f2937', fontSize: '18px' }}>\r\n                            Are you sure you want to delete this product?\r\n                        </h2>\r\n                        <p style={{ marginBottom: '25px', color: '#6b7280', fontSize: '14px' }}>\r\n                            <strong>{deleteConfirm.productName}</strong> will be permanently removed.\r\n                        </p>\r\n                        <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>\r\n                            <button\r\n                                onClick={confirmDelete}\r\n                                disabled={isDeleting}\r\n                                style={{\r\n                                    padding: '10px 20px',\r\n                                    backgroundColor: '#dc2626',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    cursor: isDeleting ? 'not-allowed' : 'pointer',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '500',\r\n                                    opacity: isDeleting ? 0.6 : 1,\r\n                                }}\r\n                            >\r\n                                {isDeleting ? 'Deleting...' : 'Delete'}\r\n                            </button>\r\n                            <button\r\n                                onClick={cancelDelete}\r\n                                disabled={isDeleting}\r\n                                style={{\r\n                                    padding: '10px 20px',\r\n                                    backgroundColor: '#6b7280',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    cursor: isDeleting ? 'not-allowed' : 'pointer',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '500',\r\n                                    opacity: isDeleting ? 0.6 : 1,\r\n                                }}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 553, "column": 0}, "map": {"version":3,"sources":["file:///E:/inventory-app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}