module.exports=[29555,a=>{a.v({backLink:"admin-module__aXBbkG__backLink",container:"admin-module__aXBbkG__container",dangerBtn:"admin-module__aXBbkG__dangerBtn",error:"admin-module__aXBbkG__error",formGroup:"admin-module__aXBbkG__formGroup",panel:"admin-module__aXBbkG__panel",section:"admin-module__aXBbkG__section",success:"admin-module__aXBbkG__success",warning:"admin-module__aXBbkG__warning"})},62085,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(29555);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)({adminCount:0,memberCount:0}),[p,q]=(0,c.useState)(!0);(0,c.useEffect)(()=>{r()},[]);let r=async()=>{try{let a=JSON.parse(localStorage.getItem("user")||"{}"),b=await fetch("/api/users",{headers:{Authorization:`Bearer ${a.id}`}});if(b.ok){let a=await b.json(),c=a.filter(a=>"admin"===a.role).length,d=a.filter(a=>"member"===a.role).length;o({adminCount:c,memberCount:d})}}catch(a){console.error("Error fetching stats:",a)}finally{q(!1)}},s=async()=>{if(!f)return void m("Please enter admin password");if(window.confirm(" This will permanently delete ALL history and inventory! Are you sure?")){i(!0),k(""),m("");try{let b=await fetch("/api/admin/clear-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:f})}),c=await b.json();b.ok?(k(" Database cleared successfully!"),g(""),setTimeout(()=>{a.push("/")},2e3)):m(c.error||"Failed to clear database")}catch(a){m("Error: "+a.message)}finally{i(!1)}}};return(0,b.jsx)("div",{className:e.default.container,children:(0,b.jsxs)("div",{className:e.default.panel,children:[(0,b.jsx)("h1",{children:" Admin Panel"}),!p&&(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"#dbeafe",border:"2px solid #3b82f6",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#3b82f6"},children:n.adminCount}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Admin Users"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#dcfce7",border:"2px solid #22c55e",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#22c55e"},children:n.memberCount}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Member Users"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#f3e8ff",border:"2px solid #a855f7",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#a855f7"},children:n.adminCount+n.memberCount}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Total Users"})]})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#f0f4ff",border:"2px solid #3b82f6",borderRadius:"var(--radius)",padding:"1.5rem",marginBottom:"2rem",textAlign:"center"},children:[(0,b.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"ðŸ‘¥ Manage Members"}),(0,b.jsx)("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.875rem"},children:"View all registered users, add or remove members"}),(0,b.jsx)("a",{href:"/members",style:{display:"inline-block",backgroundColor:"#3b82f6",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",textDecoration:"none",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:a=>a.target.style.backgroundColor="#2563eb",onMouseOut:a=>a.target.style.backgroundColor="#3b82f6",children:"Go to Members Page â†’"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#f0fdf4",border:"2px solid #22c55e",borderRadius:"var(--radius)",padding:"1.5rem",marginBottom:"2rem",textAlign:"center"},children:[(0,b.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"ðŸ“Š Access Logs"}),(0,b.jsx)("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.875rem"},children:"View all members and admins who have accessed the system"}),(0,b.jsx)("a",{href:"/access-logs",style:{display:"inline-block",backgroundColor:"#22c55e",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",textDecoration:"none",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:a=>a.target.style.backgroundColor="#16a34a",onMouseOut:a=>a.target.style.backgroundColor="#22c55e",children:"View Access Logs â†’"})]}),(0,b.jsxs)("div",{className:e.default.section,children:[(0,b.jsx)("h2",{children:"âš ï¸ Danger Zone"}),(0,b.jsx)("p",{className:e.default.warning,children:"Clear all transaction history and inventory from the database. This action cannot be undone!"}),(0,b.jsxs)("div",{className:e.default.formGroup,children:[(0,b.jsx)("label",{children:"Admin Password:"}),(0,b.jsx)("input",{type:"password",value:f,onChange:a=>g(a.target.value),placeholder:"Enter admin password",disabled:h,onKeyPress:a=>"Enter"===a.key&&s()})]}),l&&(0,b.jsx)("div",{className:e.default.error,children:l}),j&&(0,b.jsx)("div",{className:e.default.success,children:j}),(0,b.jsx)("button",{onClick:s,disabled:h,className:e.default.dangerBtn,children:h?"Clearing...":" Clear All Data"})]}),(0,b.jsx)("div",{className:e.default.backLink,children:(0,b.jsx)("a",{href:"/",children:"â† Back to Dashboard"})})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_admin_2ea67458._.js.map