{"version":3,"sources":["turbopack:///[project]/app/admin/admin.module.css [app-ssr] (css module)","../../../../app/admin/page.js"],"sourcesContent":["__turbopack_context__.v({\n  \"backLink\": \"admin-module__aXBbkG__backLink\",\n  \"container\": \"admin-module__aXBbkG__container\",\n  \"dangerBtn\": \"admin-module__aXBbkG__dangerBtn\",\n  \"error\": \"admin-module__aXBbkG__error\",\n  \"formGroup\": \"admin-module__aXBbkG__formGroup\",\n  \"panel\": \"admin-module__aXBbkG__panel\",\n  \"section\": \"admin-module__aXBbkG__section\",\n  \"success\": \"admin-module__aXBbkG__success\",\n  \"warning\": \"admin-module__aXBbkG__warning\",\n});\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport styles from './admin.module.css';\r\n\r\nexport default function AdminPanel() {\r\n  const router = useRouter();\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [stats, setStats] = useState({ adminCount: 0, memberCount: 0 });\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n      const res = await fetch('/api/users', {\r\n        headers: {\r\n          'Authorization': `Bearer ${user.id}`\r\n        }\r\n      });\r\n\r\n      if (res.ok) {\r\n        const users = await res.json();\r\n        const adminCount = users.filter(u => u.role === 'admin').length;\r\n        const memberCount = users.filter(u => u.role === 'member').length;\r\n        setStats({ adminCount, memberCount });\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching stats:', err);\r\n    } finally {\r\n      setLoadingStats(false);\r\n    }\r\n  };\r\n\r\n  const handleClearDatabase = async () => {\r\n    if (!password) {\r\n      setError('Please enter admin password');\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(' This will permanently delete ALL history and inventory! Are you sure?')) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('');\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch('/api/admin/clear-data', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setMessage(' Database cleared successfully!');\r\n        setPassword('');\r\n        setTimeout(() => {\r\n          router.push('/');\r\n        }, 2000);\r\n      } else {\r\n        setError(data.error || 'Failed to clear database');\r\n      }\r\n    } catch (err) {\r\n      setError('Error: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.panel}>\r\n        <h1> Admin Panel</h1>\r\n\r\n        {/* Statistics Section */}\r\n        {!loadingStats && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n            gap: '1rem',\r\n            marginBottom: '2rem'\r\n          }}>\r\n            <div style={{\r\n              backgroundColor: '#dbeafe',\r\n              border: '2px solid #3b82f6',\r\n              borderRadius: 'var(--radius)',\r\n              padding: '1.5rem',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#3b82f6' }}>\r\n                {stats.adminCount}\r\n              </div>\r\n              <div style={{ color: '#666', fontSize: '0.875rem', marginTop: '0.5rem' }}>\r\n                Admin Users\r\n              </div>\r\n            </div>\r\n            <div style={{\r\n              backgroundColor: '#dcfce7',\r\n              border: '2px solid #22c55e',\r\n              borderRadius: 'var(--radius)',\r\n              padding: '1.5rem',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#22c55e' }}>\r\n                {stats.memberCount}\r\n              </div>\r\n              <div style={{ color: '#666', fontSize: '0.875rem', marginTop: '0.5rem' }}>\r\n                Member Users\r\n              </div>\r\n            </div>\r\n            <div style={{\r\n              backgroundColor: '#f3e8ff',\r\n              border: '2px solid #a855f7',\r\n              borderRadius: 'var(--radius)',\r\n              padding: '1.5rem',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#a855f7' }}>\r\n                {stats.adminCount + stats.memberCount}\r\n              </div>\r\n              <div style={{ color: '#666', fontSize: '0.875rem', marginTop: '0.5rem' }}>\r\n                Total Users\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Members Management Link */}\r\n        <div style={{\r\n          backgroundColor: '#f0f4ff',\r\n          border: '2px solid #3b82f6',\r\n          borderRadius: 'var(--radius)',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ marginBottom: '1rem', color: '#1f2937' }}>üë• Manage Members</h3>\r\n          <p style={{ color: '#666', marginBottom: '1rem', fontSize: '0.875rem' }}>\r\n            View all registered users, add or remove members\r\n          </p>\r\n          <a href=\"/members\" style={{\r\n            display: 'inline-block',\r\n            backgroundColor: '#3b82f6',\r\n            color: '#fff',\r\n            padding: '0.75rem 1.5rem',\r\n            borderRadius: 'var(--radius)',\r\n            textDecoration: 'none',\r\n            fontWeight: '500',\r\n            transition: 'background-color 0.2s'\r\n          }} onMouseOver={(e) => e.target.style.backgroundColor = '#2563eb'} onMouseOut={(e) => e.target.style.backgroundColor = '#3b82f6'}>\r\n            Go to Members Page ‚Üí\r\n          </a>\r\n        </div>\r\n\r\n        {/* Access Logs Link */}\r\n        <div style={{\r\n          backgroundColor: '#f0fdf4',\r\n          border: '2px solid #22c55e',\r\n          borderRadius: 'var(--radius)',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ marginBottom: '1rem', color: '#1f2937' }}>üìä Access Logs</h3>\r\n          <p style={{ color: '#666', marginBottom: '1rem', fontSize: '0.875rem' }}>\r\n            View all members and admins who have accessed the system\r\n          </p>\r\n          <a href=\"/access-logs\" style={{\r\n            display: 'inline-block',\r\n            backgroundColor: '#22c55e',\r\n            color: '#fff',\r\n            padding: '0.75rem 1.5rem',\r\n            borderRadius: 'var(--radius)',\r\n            textDecoration: 'none',\r\n            fontWeight: '500',\r\n            transition: 'background-color 0.2s'\r\n          }} onMouseOver={(e) => e.target.style.backgroundColor = '#16a34a'} onMouseOut={(e) => e.target.style.backgroundColor = '#22c55e'}>\r\n            View Access Logs ‚Üí\r\n          </a>\r\n        </div>\r\n        \r\n        <div className={styles.section}>\r\n          <h2>‚ö†Ô∏è Danger Zone</h2>\r\n          <p className={styles.warning}>\r\n            Clear all transaction history and inventory from the database.\r\n            This action cannot be undone!\r\n          </p>\r\n          \r\n          <div className={styles.formGroup}>\r\n            <label>Admin Password:</label>\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"Enter admin password\"\r\n              disabled={loading}\r\n              onKeyPress={(e) => e.key === 'Enter' && handleClearDatabase()}\r\n            />\r\n          </div>\r\n\r\n          {error && <div className={styles.error}>{error}</div>}\r\n          {message && <div className={styles.success}>{message}</div>}\r\n\r\n          <button\r\n            onClick={handleClearDatabase}\r\n            disabled={loading}\r\n            className={styles.dangerBtn}\r\n          >\r\n            {loading ? 'Clearing...' : ' Clear All Data'}\r\n          </button>\r\n        </div>\r\n\r\n        <div className={styles.backLink}>\r\n          <a href=\"/\">‚Üê Back to Dashboard</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"0BAAA,EAAA,CAAA,CAAA,CACA,SAAA,iCACA,UAAA,kCACA,UAAA,kCACA,MAAA,8BACA,UAAA,kCACA,MAAA,8BACA,QAAA,gCACA,QAAA,gCACA,QAAA,+BACA,4CCRA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC7B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAE,WAAY,EAAG,YAAa,CAAE,GAC7D,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,EAAE,EAEL,IAAM,EAAa,UACjB,GAAI,CACF,IAAM,EAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,SAAW,MAClD,EAAM,MAAM,MAAM,aAAc,CACpC,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAK,EAAE,CAAA,CAAE,AACtC,CACF,GAEA,GAAI,EAAI,EAAE,CAAE,CACV,IAAM,EAAQ,MAAM,EAAI,IAAI,GACtB,EAAa,EAAM,MAAM,CAAC,GAAgB,UAAX,EAAE,IAAI,EAAc,MAAM,CACzD,EAAc,EAAM,MAAM,CAAC,GAAgB,WAAX,EAAE,IAAI,EAAe,MAAM,CACjE,EAAS,YAAE,cAAY,CAAY,EACrC,CACF,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,wBAAyB,EACzC,QAAU,CACR,GAAgB,EAClB,CACF,EAEM,EAAsB,UAC1B,GAAI,CAAC,EAAU,YACb,EAAS,+BAIX,GAAK,CAAD,MAAQ,OAAO,CAAC,2EAA2E,AAI/F,GAAW,GACX,EAAW,IACX,EAAS,IAET,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,wBAAyB,CACpD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,UAAE,CAAS,EAClC,GAEM,EAAO,MAAM,EAAS,IAAI,GAE5B,EAAS,EAAE,EACb,AADe,EACJ,mCACX,EAAY,IACZ,WAAW,KACT,EAAO,IAAI,CAAC,IACd,EAAG,MAEH,EAAS,EAAK,KAAK,EAAI,2BAE3B,CAAE,MAAO,EAAK,CACZ,EAAS,UAAY,EAAI,OAAO,CAClC,QAAU,CACR,GAAW,EACb,EACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,SAAS,UAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,KAAK,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,iBAGH,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,QAAS,OACT,oBAAqB,uCACrB,IAAK,OACL,aAAc,MAChB,YACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,gBACd,QAAS,SACT,UAAW,QACb,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,WAAY,OAAQ,MAAO,SAAU,WAClE,EAAM,UAAU,GAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,OAAQ,SAAU,WAAY,UAAW,QAAS,WAAG,mBAI5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,gBACd,QAAS,SACT,UAAW,QACb,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,WAAY,OAAQ,MAAO,SAAU,WAClE,EAAM,WAAW,GAEpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,OAAQ,SAAU,WAAY,UAAW,QAAS,WAAG,oBAI5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,gBACd,QAAS,SACT,UAAW,QACb,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,WAAY,OAAQ,MAAO,SAAU,WAClE,EAAM,UAAU,CAAG,EAAM,WAAW,GAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,OAAQ,SAAU,WAAY,UAAW,QAAS,WAAG,sBAQhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,gBACd,QAAS,SACT,aAAc,OACd,UAAW,QACb,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,aAAc,OAAQ,MAAO,SAAU,WAAG,sBACvD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,OAAQ,aAAc,OAAQ,SAAU,UAAW,WAAG,qDAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,WAAW,MAAO,CACxB,QAAS,eACT,gBAAiB,UACjB,MAAO,OACP,QAAS,iBACT,aAAc,gBACd,eAAgB,OAChB,WAAY,MACZ,WAAY,uBACd,EAAG,YAAa,AAAC,GAAM,EAAE,MAAM,CAAC,KAAK,CAAC,eAAe,CAAG,UAAW,WAAY,AAAC,GAAM,EAAE,MAAM,CAAC,KAAK,CAAC,eAAe,CAAG,mBAAW,4BAMpI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,UACjB,OAAQ,oBACR,aAAc,gBACd,QAAS,SACT,aAAc,OACd,UAAW,QACb,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,aAAc,OAAQ,MAAO,SAAU,WAAG,mBACvD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,OAAQ,aAAc,OAAQ,SAAU,UAAW,WAAG,6DAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,eAAe,MAAO,CAC5B,QAAS,eACT,gBAAiB,UACjB,MAAO,OACP,QAAS,iBACT,aAAc,gBACd,eAAgB,OAChB,WAAY,MACZ,WAAY,uBACd,EAAG,YAAa,AAAC,GAAM,EAAE,MAAM,CAAC,KAAK,CAAC,eAAe,CAAG,UAAW,WAAY,AAAC,GAAM,EAAE,MAAM,CAAC,KAAK,CAAC,eAAe,CAAG,mBAAW,0BAKpI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,OAAO,WAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,mBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,EAAA,OAAM,CAAC,OAAO,UAAE,iGAK9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,SAAS,WAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,oBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,uBACZ,SAAU,EACV,WAAY,AAAC,GAAgB,UAAV,EAAE,GAAG,EAAgB,SAI3C,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,KAAK,UAAG,IACxC,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,OAAO,UAAG,IAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,EACV,UAAW,EAAA,OAAM,CAAC,SAAS,UAE1B,EAAU,cAAgB,uBAI/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,QAAQ,UAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,aAAI,8BAKtB"}