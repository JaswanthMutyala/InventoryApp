module.exports=[89418,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);let e=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)({userName:"",productName:"All",date:"",type:"All"});(0,c.useEffect)(()=>{let b=localStorage.getItem("user");if(b){let a=JSON.parse(b);g(a),p(a)}else a.push("/login")},[a]);let p=async a=>{try{let[a,b]=await Promise.all([fetch("/api/transactions"),fetch("/api/products")]),c=await a.json(),d=await b.json();k(d),i(c)}catch(a){console.error("Failed to fetch data",a)}finally{m(!1)}},q=a=>{let{name:b,value:c}=a.target;o(a=>({...a,[b]:c}))},r=h.filter(a=>{let b=j.find(b=>b.id===a.product_id)?.name||"Unknown Product";return(""===n.userName||a.user_name?.toLowerCase().includes(n.userName.toLowerCase()))&&("All"===n.productName||b===n.productName)&&(""===n.date||e(a.timestamp)===n.date)&&("All"===n.type||a.type===n.type)});return!f||l?null:(0,b.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,b.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"1.5rem",color:"#1e293b"},children:"Transaction History"}),(0,b.jsx)("div",{className:"card",style:{marginBottom:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"User Name"}),(0,b.jsx)("input",{type:"text",name:"userName",value:n.userName,onChange:q,className:"input",placeholder:"Search...",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem"}})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Product"}),(0,b.jsxs)("select",{name:"productName",value:n.productName,onChange:q,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem",cursor:"pointer"},children:[(0,b.jsx)("option",{value:"All",children:"All"}),j.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Date"}),(0,b.jsx)("input",{type:"date",name:"date",value:n.date,onChange:q,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem"}})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Type"}),(0,b.jsxs)("select",{name:"type",value:n.type,onChange:q,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem",cursor:"pointer"},children:[(0,b.jsx)("option",{value:"All",children:"All"}),(0,b.jsx)("option",{value:"CHECKOUT",children:"Checkout"}),(0,b.jsx)("option",{value:"CHECKIN",children:"Return"})]})]})]})}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"#1e293b"},children:"Transaction History"}),r.length>0?(0,b.jsx)("div",{style:{overflowX:"auto"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:[(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"User Name"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Product"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Quantity"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Type"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Date"})]})}),(0,b.jsx)("tbody",{children:r.map((a,c)=>{let d=j.find(b=>b.id===a.product_id)?.name||"Unknown Product",f="CHECKOUT"===a.type?"took":"return";return(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#1e293b"},children:a.user_name||"-"}),(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#1e293b"},children:d}),(0,b.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:a.quantity}),(0,b.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:f}),(0,b.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:e(a.timestamp)})]},c)})})]})}):(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:(0,b.jsx)("p",{children:"No transactions yet"})})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_history_page_db442b5c.js.map