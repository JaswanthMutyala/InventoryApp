module.exports=[28816,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)({name:"",description:"",quantity:0,image_url:""}),[o,p]=(0,c.useState)({show:!1,productId:null,productName:""}),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=localStorage.getItem("user");b?(f(JSON.parse(b)),y()):a.push("/login")},[a]);let y=async()=>{let a=await fetch("/api/products");h(await a.json())},z=e?.role==="admin",A=async a=>{if(a.preventDefault(),!m.image_url&&!i)return void alert("Please provide an image URL for this product");let b=i?`/api/products/${k.id}`:"/api/products",c={name:m.name,description:m.description||"",quantity:m.quantity||0,user_id:e.id,image_url:m.image_url},d=await fetch(b,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});d.ok?(y(),j(!1),l(null),n({name:"",description:"",quantity:0,image_url:""})):alert((await d.json()).error||"Failed to save product")},B=async()=>{if(o.productId){r(!0);try{let a=await fetch(`/api/products/${o.productId}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id})});if(a.ok)y(),p({show:!1,productId:null,productName:""});else{let b=await a.json();alert(b.error||"Failed to delete product")}}catch(a){alert("Error: "+a.message)}finally{r(!1)}}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"section-title",children:"Inventory Management"}),(0,b.jsx)("div",{className:"badge badge-primary",children:z?"Admin":"Member"})]}),z&&(0,b.jsxs)("div",{className:"card mb-6",children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:w?"1rem":0},children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:i?"Edit Product":"Add New Product"}),(0,b.jsx)("button",{type:"button",onClick:()=>x(a=>!a),style:{background:"none",border:"1px solid #e5e7eb",borderRadius:"999px",padding:"0.25rem 0.75rem",fontSize:"0.8rem",cursor:"pointer",color:"#4b5563"},children:w?"Hide":"Show"})]}),w&&(0,b.jsxs)("form",{onSubmit:A,className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Product Name"}),(0,b.jsx)("input",{className:"input",placeholder:"Product Name",value:m.name,onChange:a=>n({...m,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Description"}),(0,b.jsx)("input",{className:"input",placeholder:"Description",value:m.description,onChange:a=>n({...m,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Quantity"}),(0,b.jsx)("input",{type:"number",className:"input",placeholder:"Quantity",value:m.quantity,onChange:a=>n({...m,quantity:parseInt(a.target.value)||0}),required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Image URL"}),(0,b.jsx)("input",{className:"input",placeholder:"https://example.com/image.jpg",value:m.image_url,onChange:a=>n({...m,image_url:a.target.value}),required:!i})]}),(0,b.jsxs)("div",{className:"flex gap-2",style:{gridColumn:"1 / -1"},children:[(0,b.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[i?"Update":"Add"," Product"]}),i&&(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{j(!1),l(null),n({name:"",description:"",quantity:0,image_url:""})},children:"Cancel"})]})]})]}),0===g.length?(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Product List"}),(0,b.jsx)("div",{className:"card",style:{textAlign:"center"},children:(0,b.jsx)("p",{className:"text-sm text-secondary",children:"No products are available at the moment."})})]}):(0,b.jsx)("div",{className:"grid gap-4",children:g.map(a=>(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex-1",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.image_url&&(0,b.jsx)("img",{src:a.image_url,alt:a.name,style:{width:"56px",height:"56px",objectFit:"cover",borderRadius:"0.5rem",cursor:"pointer",flexShrink:0},onClick:()=>t(a.image_url)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-secondary",children:a.description}),(0,b.jsxs)("p",{className:"text-sm mt-2",children:["Quantity: ",(0,b.jsx)("span",{className:"font-bold text-primary",children:a.quantity})]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{j(!0),l(a),n({...a})},className:"btn btn-secondary",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{p({show:!0,productId:a.id,productName:a.name})},className:"btn btn-danger",disabled:q,children:"Delete"})]})})]})},a.id))}),s&&(0,b.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},onClick:()=>t(""),children:(0,b.jsx)("div",{style:{backgroundColor:"#fff",padding:"1rem",borderRadius:"0.75rem",maxWidth:"90vw",maxHeight:"90vh",boxShadow:"var(--shadow-lg)"},onClick:a=>a.stopPropagation(),children:(0,b.jsx)("img",{src:s,alt:"Product image",style:{maxWidth:"80vw",maxHeight:"80vh",objectFit:"contain",display:"block"}})})}),o.show&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,b.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"30px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%",textAlign:"center"},children:[(0,b.jsx)("h2",{style:{marginBottom:"20px",color:"#1f2937",fontSize:"18px"},children:"Are you sure you want to delete this product?"}),(0,b.jsxs)("p",{style:{marginBottom:"25px",color:"#6b7280",fontSize:"14px"},children:[(0,b.jsx)("strong",{children:o.productName})," will be permanently removed."]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[(0,b.jsx)("button",{onClick:B,disabled:q,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:q?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",opacity:q?.6:1},children:q?"Deleting...":"Delete"}),(0,b.jsx)("button",{onClick:()=>{p({show:!1,productId:null,productName:""})},disabled:q,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:q?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",opacity:q?.6:1},children:"Cancel"})]})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_inventory_page_c887b930.js.map