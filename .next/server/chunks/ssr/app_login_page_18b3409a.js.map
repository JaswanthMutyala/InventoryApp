{"version":3,"sources":["../../../../app/login/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function LoginPage() {\r\n    const [studentId, setStudentId] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [role, setRole] = useState('member');\r\n    const [adminPassword, setAdminPassword] = useState('');\r\n    const [memberPassword, setMemberPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const router = useRouter();\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        // Validate inputs\r\n        if (role === 'admin' && name !== 'Jaswanth') {\r\n            setError('Admin name must be \"Jaswanth\"');\r\n            return;\r\n        }\r\n\r\n        if (role === 'admin' && !adminPassword) {\r\n            setError('Admin password is required');\r\n            return;\r\n        }\r\n\r\n        if (role === 'member' && !memberPassword) {\r\n            setError('Member password is required');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch('/api/auth', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ \r\n                    student_id: studentId, \r\n                    name, \r\n                    role, \r\n                    admin_password: adminPassword,\r\n                    member_password: memberPassword \r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                const user = await res.json();\r\n                localStorage.setItem('user', JSON.stringify(user));\r\n                window.location.href = '/';\r\n            } else {\r\n                const data = await res.json();\r\n                setError(data.error || 'Login failed');\r\n            }\r\n        } catch (err) {\r\n            setError('An error occurred');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\" style={{ \r\n            display: 'flex', \r\n            justifyContent: 'center', \r\n            alignItems: 'center', \r\n            minHeight: 'calc(100vh - 80px)',\r\n            padding: '1rem'\r\n        }}>\r\n            <div className=\"card\" style={{ \r\n                width: '100%', \r\n                maxWidth: '450px',\r\n                margin: '0 auto',\r\n                padding: '1.5rem',\r\n                boxSizing: 'border-box'\r\n            }}>\r\n                <div style={{ \r\n                    textAlign: 'center', \r\n                    marginBottom: '1.5rem',\r\n                    wordWrap: 'break-word',\r\n                    overflowWrap: 'break-word'\r\n                }}>\r\n                    <h1 className=\"text-2xl font-bold mb-2\">Inventory Management</h1>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div style={{\r\n                        backgroundColor: '#fee2e2',\r\n                        border: '1px solid #fca5a5',\r\n                        color: 'var(--danger)',\r\n                        padding: '0.75rem 1rem',\r\n                        borderRadius: 'var(--radius)',\r\n                        marginBottom: '1rem',\r\n                        fontSize: '0.875rem'\r\n                    }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleLogin} style={{ display: 'grid', gap: '1rem' }}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"role\" className=\"text-sm font-medium\" style={{ display: 'block', marginBottom: '0.5rem' }}>Role</label>\r\n                        <select\r\n                            id=\"role\"\r\n                            className=\"input\"\r\n                            value={role}\r\n                            onChange={(e) => {\r\n                                setRole(e.target.value);\r\n                                setAdminPassword('');\r\n                                setMemberPassword('');\r\n                            }}\r\n                        >\r\n                            <option value=\"member\">Member</option>\r\n                            <option value=\"admin\">Admin</option>\r\n                        </select>\r\n                        \r\n                    </div>\r\n                    \r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"name\" className=\"text-sm font-medium\" style={{ display: 'block', marginBottom: '0.5rem' }}>Name</label>\r\n                        <input\r\n                            id=\"name\"\r\n                            type=\"text\"\r\n                            className=\"input\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            required\r\n                            placeholder=\"Enter your full name\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"studentId\" className=\"text-sm font-medium\" style={{ display: 'block', marginBottom: '0.5rem' }}>Registered Number</label>\r\n                        <input\r\n                            id=\"studentId\"\r\n                            type=\"text\"\r\n                            className=\"input\"\r\n                            value={studentId}\r\n                            onChange={(e) => setStudentId(e.target.value)}\r\n                            required\r\n                            placeholder=\"Enter your Registered Number\"\r\n                        />\r\n                    </div>\r\n\r\n                    {role === 'member' && (\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"memberPassword\" className=\"text-sm font-medium\">Password</label>\r\n                            <input\r\n                                id=\"memberPassword\"\r\n                                type=\"password\"\r\n                                className=\"input\"\r\n                                value={memberPassword}\r\n                                onChange={(e) => setMemberPassword(e.target.value)}\r\n                                placeholder=\"Enter your password\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {role === 'admin' && (\r\n                        <>\r\n                            \r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"adminPassword\" className=\"text-sm font-medium\">Password</label>\r\n                                <input\r\n                                    id=\"adminPassword\"\r\n                                    type=\"password\"\r\n                                    className=\"input\"\r\n                                    value={adminPassword}\r\n                                    onChange={(e) => setAdminPassword(e.target.value)}\r\n                                    placeholder=\"Enter your password\"\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary\" style={{ marginTop: '0.5rem' }}>\r\n                        Login\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}