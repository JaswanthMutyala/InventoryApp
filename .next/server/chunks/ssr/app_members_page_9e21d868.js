module.exports=[94859,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({name:"",student_id:"",password:""}),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("desc"),[B,C]=(0,c.useState)(!1),D=(0,d.useRouter)();(0,c.useEffect)(()=>{"admin"!==JSON.parse(localStorage.getItem("user")||"{}").role?D.push("/"):(k(!0),E())},[]);let E=async()=>{try{let a=JSON.parse(localStorage.getItem("user")||"{}"),b=await fetch("/api/users",{headers:{Authorization:`Bearer ${a.id}`}});if(b.ok){let a=await b.json();e(a)}else i("Failed to fetch users")}catch(a){i("Error fetching users")}finally{g(!1)}},F=async()=>{if(!l)return void i("Please enter admin password");s(!0),i("");try{let b=JSON.parse(localStorage.getItem("user")||"{}"),c=await fetch("/api/users",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.id}`},body:JSON.stringify({userId:p.id,password:l})});if(c.ok)e(a.filter(a=>a.id!==p.id)),o(!1),q(null),m("");else{let a=await c.json();i(a.error||"Failed to delete user")}}catch(a){i("Error deleting user")}finally{s(!1)}},G=async()=>{if(!v.name||!v.student_id||!v.password)return void i("Please fill in all fields");C(!0),i("");try{let b=JSON.parse(localStorage.getItem("user")||"{}"),c=await fetch("/api/users/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.id}`},body:JSON.stringify({name:v.name,student_id:v.student_id,password:v.password})});if(c.ok){let b=await c.json();e([...a,b]),u(!1),w({name:"",student_id:"",password:""})}else{let a=await c.json();i(a.error||"Failed to add member")}}catch(a){i("Error adding member")}finally{C(!1)}},H=a.filter(a=>"admin"===a.role).length,I=a.filter(a=>"member"===a.role).length,J=[...a].filter(a=>{if(!x.trim())return!0;let b=x.toLowerCase();return a.name.toLowerCase().includes(b)||(a.student_id||"").toLowerCase().includes(b)}).sort((a,b)=>{let c=new Date(a.created_at),d=new Date(b.created_at);return"desc"===z?d-c:c-d});return j?(0,b.jsxs)("div",{className:"container",style:{padding:"2rem 1rem",maxWidth:"1200px"},children:[(0,b.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Members Management"}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"#dbeafe",border:"2px solid #3b82f6",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#3b82f6"},children:H}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Admin Users"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#dcfce7",border:"2px solid #22c55e",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#22c55e"},children:I}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Member Users"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#f3e8ff",border:"2px solid #a855f7",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#a855f7"},children:a.length}),(0,b.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Total Users"})]})]})]}),(0,b.jsx)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:(0,b.jsx)("button",{onClick:()=>u(!0),style:{backgroundColor:"#22c55e",color:"#fff",border:"none",padding:"0.75rem 2rem",borderRadius:"var(--radius)",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"background-color 0.2s"},onMouseOver:a=>a.target.style.backgroundColor="#16a34a",onMouseOut:a=>a.target.style.backgroundColor="#22c55e",children:"Add New Member"})}),h&&(0,b.jsx)("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #fca5a5",color:"#dc2626",padding:"1rem",borderRadius:"var(--radius)",marginBottom:"1rem"},children:h}),!f&&a.length>0&&(0,b.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1rem",alignItems:"center"},children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by name or roll number",value:x,onChange:a=>y(a.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"0.6rem 0.8rem",borderRadius:"var(--radius)",border:"1px solid #d1d5db",fontSize:"0.9rem"}}),(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("label",{style:{fontSize:"0.85rem",color:"#4b5563"},children:"Order:"}),(0,b.jsxs)("select",{value:z,onChange:a=>A(a.target.value),style:{padding:"0.45rem 0.75rem",borderRadius:"var(--radius)",border:"1px solid #d1d5db",fontSize:"0.85rem",cursor:"pointer"},children:[(0,b.jsx)("option",{value:"desc",children:"Newest first"}),(0,b.jsx)("option",{value:"asc",children:"Oldest first"})]})]})})]}),f?(0,b.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading..."}):0===J.length?(0,b.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No users found"}):(0,b.jsx)("div",{style:{overflowX:"auto"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",borderRadius:"var(--radius)",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{backgroundColor:"#f3f4f6",borderBottom:"2px solid #e5e7eb"},children:[(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Name"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Roll Number"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Role"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Joined Date"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:J.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,b.jsx)("td",{style:{padding:"1rem"},children:a.name}),(0,b.jsx)("td",{style:{padding:"1rem"},children:a.student_id}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"999px",fontSize:"0.875rem",fontWeight:"600",backgroundColor:"admin"===a.role?"#fef3c7":"#dbeafe",color:"admin"===a.role?"#b45309":"#1e40af"},children:"admin"===a.role?"Admin":"Member"})}),(0,b.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem"},children:new Date(a.created_at).toLocaleDateString("en-IN")}),(0,b.jsxs)("td",{style:{padding:"1rem",textAlign:"center"},children:["member"===a.role&&(0,b.jsx)("button",{onClick:()=>{q(a),o(!0),m("")},style:{backgroundColor:"#ef4444",color:"#fff",border:"none",padding:"0.5rem 1rem",borderRadius:"var(--radius)",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:a=>a.target.style.backgroundColor="#dc2626",onMouseOut:a=>a.target.style.backgroundColor="#ef4444",children:"ðŸ—‘ï¸ Remove"}),"admin"===a.role&&(0,b.jsx)("span",{style:{color:"#999",fontSize:"0.875rem"},children:"Cannot delete admin"})]})]},a.id))})]})}),n&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,b.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"var(--radius)",padding:"2rem",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Remove Member"}),(0,b.jsxs)("p",{style:{color:"#666",marginBottom:"1.5rem"},children:["Are you sure you want to remove ",(0,b.jsx)("strong",{children:p?.name}),"? This action cannot be undone."]}),h&&(0,b.jsx)("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #fca5a5",color:"#dc2626",padding:"0.75rem 1rem",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem"},children:h}),(0,b.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Admin Password:"}),(0,b.jsx)("input",{type:"password",value:l,onChange:a=>m(a.target.value),placeholder:"Enter admin password",disabled:r,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"var(--radius)",fontSize:"1rem",boxSizing:"border-box"}})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{onClick:()=>o(!1),disabled:r,style:{backgroundColor:"#e5e7eb",color:"#1f2937",border:"none",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",cursor:r?"not-allowed":"pointer",fontWeight:"500",opacity:r?.6:1},children:"Cancel"}),(0,b.jsx)("button",{onClick:F,disabled:r,style:{backgroundColor:"#ef4444",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",cursor:r?"not-allowed":"pointer",fontWeight:"500",opacity:r?.6:1},children:r?"Removing...":"Remove Member"})]})]})}),t&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,b.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"var(--radius)",padding:"2rem",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Add New Member"}),h&&(0,b.jsx)("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #fca5a5",color:"#dc2626",padding:"0.75rem 1rem",borderRadius:"var(--radius)",marginBottom:"1rem",fontSize:"0.875rem"},children:h}),(0,b.jsxs)("div",{style:{display:"grid",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Name:"}),(0,b.jsx)("input",{type:"text",value:v.name,onChange:a=>w({...v,name:a.target.value}),placeholder:"Enter member name",disabled:B,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"var(--radius)",fontSize:"1rem",boxSizing:"border-box"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Roll Number:"}),(0,b.jsx)("input",{type:"text",value:v.student_id,onChange:a=>w({...v,student_id:a.target.value}),placeholder:"Enter roll number",disabled:B,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"var(--radius)",fontSize:"1rem",boxSizing:"border-box"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Password:"}),(0,b.jsx)("input",{type:"password",value:v.password,onChange:a=>w({...v,password:a.target.value}),placeholder:"Enter password",disabled:B,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"var(--radius)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem"},children:[(0,b.jsx)("button",{onClick:()=>u(!1),disabled:B,style:{backgroundColor:"#e5e7eb",color:"#1f2937",border:"none",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",cursor:B?"not-allowed":"pointer",fontWeight:"500",opacity:B?.6:1},children:"Cancel"}),(0,b.jsx)("button",{onClick:G,disabled:B,style:{backgroundColor:"#22c55e",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",cursor:B?"not-allowed":"pointer",fontWeight:"500",opacity:B?.6:1},children:B?"Adding...":"Add Member"})]})]})}),(0,b.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,b.jsx)("a",{href:"/access-logs",style:{color:"#3b82f6",textDecoration:"none",fontWeight:"500",marginRight:"2rem"},children:"â†’ View Access Logs"}),(0,b.jsx)("a",{href:"/",style:{color:"#3b82f6",textDecoration:"none",fontWeight:"500"},children:"â† Back to Dashboard"})]})]}):null}a.s(["default",()=>e])}];

//# sourceMappingURL=app_members_page_9e21d868.js.map