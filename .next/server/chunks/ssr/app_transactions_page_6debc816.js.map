{"version":3,"sources":["../../../../app/transactions/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function TransactionsPage() {\r\n    const router = useRouter();\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [outstanding, setOutstanding] = useState([]);\r\n    const [user, setUser] = useState(null);\r\n    const [transactionType, setTransactionType] = useState('CHECKOUT');\r\n    const [bulkItems, setBulkItems] = useState([]);\r\n    const [currentProduct, setCurrentProduct] = useState('');\r\n    const [currentQuantity, setCurrentQuantity] = useState(1);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const [imagePreview, setImagePreview] = useState('');\r\n\r\n    useEffect(() => {\r\n        const storedUser = localStorage.getItem('user');\r\n        if (!storedUser) {\r\n            router.push('/login');\r\n        } else {\r\n            setUser(JSON.parse(storedUser));\r\n            fetchData();\r\n        }\r\n    }, [router]);\r\n\r\n    const fetchData = async () => {\r\n        const [transRes, prodRes] = await Promise.all([\r\n            fetch('/api/transactions'),\r\n            fetch('/api/products')\r\n        ]);\r\n        setTransactions(await transRes.json());\r\n        setProducts(await prodRes.json());\r\n        \r\n        // Fetch outstanding quantities for the current user\r\n        const storedUser = localStorage.getItem('user');\r\n        if (storedUser) {\r\n            const userData = JSON.parse(storedUser);\r\n            const outstandingRes = await fetch(`/api/transactions/outstanding?user_id=${userData.id}`);\r\n            setOutstanding(await outstandingRes.json());\r\n        }\r\n    };\r\n\r\n    const getMaxReturnQuantity = (productId) => {\r\n        const outstandingItem = outstanding.find(item => item.product_id === parseInt(productId));\r\n        return outstandingItem?.outstanding || 0;\r\n    };\r\n\r\n    const addBulkItem = () => {\r\n        if (!currentProduct) {\r\n            setError('Please select a product');\r\n            return;\r\n        }\r\n\r\n        const productId = parseInt(currentProduct);\r\n        const product = products.find(p => p.id === productId);\r\n\r\n        if (!product) {\r\n            setError('Selected product is invalid');\r\n            return;\r\n        }\r\n        \r\n        // Check if product already in bulk items\r\n        const existingIndex = bulkItems.findIndex(item => item.product_id === productId);\r\n        const existingQty = existingIndex >= 0 ? bulkItems[existingIndex].quantity : 0;\r\n        const requestedTotal = existingQty + currentQuantity;\r\n\r\n        if (transactionType === 'CHECKOUT') {\r\n            // Cannot take more than available stock\r\n            if (requestedTotal > product.quantity) {\r\n                setError(`Cannot take ${requestedTotal} units. Only ${product.quantity} unit(s) available for ${product.name}.`);\r\n                return;\r\n            }\r\n        } else if (transactionType === 'CHECKIN') {\r\n            const maxQty = getMaxReturnQuantity(productId);\r\n            if (requestedTotal > maxQty) {\r\n                setError(`Cannot return ${requestedTotal} units. You only have ${maxQty} unit(s) outstanding for ${product.name}.`);\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (existingIndex >= 0) {\r\n            // Update quantity if product already exists\r\n            const newBulkItems = [...bulkItems];\r\n            newBulkItems[existingIndex].quantity = requestedTotal;\r\n            setBulkItems(newBulkItems);\r\n        } else {\r\n            // Add new item\r\n            setBulkItems([\r\n                ...bulkItems,\r\n                { product_id: productId, product_name: product.name, product_image: product.image_url, quantity: currentQuantity },\r\n            ]);\r\n        }\r\n\r\n        setCurrentProduct('');\r\n        setCurrentQuantity(1);\r\n        setError('');\r\n    };\r\n\r\n    const removeBulkItem = (productId) => {\r\n        setBulkItems(bulkItems.filter(item => item.product_id !== productId));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        if (bulkItems.length === 0) {\r\n            setError('Please add at least one item');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Submit all items in bulk\r\n            const promises = bulkItems.map(item =>\r\n                fetch('/api/transactions', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        user_id: user.id,\r\n                        product_id: item.product_id,\r\n                        quantity: item.quantity,\r\n                        type: transactionType,\r\n                    }),\r\n                })\r\n            );\r\n\r\n            const results = await Promise.all(promises);\r\n            \r\n            // Check if all succeeded\r\n            const allSuccess = results.every(res => res.ok);\r\n            \r\n            if (allSuccess) {\r\n                setSuccess(`Successfully ${transactionType === 'CHECKOUT' ? 'took' : 'returned'} ${bulkItems.length} product(s)!`);\r\n                setBulkItems([]);\r\n                fetchData();\r\n                setTimeout(() => setSuccess(''), 1500);\r\n            } else {\r\n                setError('Some transactions failed. Please try again.');\r\n            }\r\n        } catch (err) {\r\n            setError(err.message || 'Transaction failed');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"section-title\">Transactions</h1>\r\n\r\n            <div className=\"card mb-6\">\r\n                <h2 className=\"text-lg font-semibold mb-4\">New Transaction</h2>\r\n                {error && (\r\n                    <div style={{\r\n                        backgroundColor: '#fee2e2',\r\n                        border: '2px solid #ef4444',\r\n                        borderRadius: 'var(--radius)',\r\n                        padding: '1rem',\r\n                        marginBottom: '1.5rem',\r\n                        display: 'flex',\r\n                        alignItems: 'flex-start',\r\n                        gap: '0.75rem'\r\n                    }}>\r\n                        \r\n                        <div>\r\n                            <p style={{ \r\n                                color: '#991b1b', \r\n                                fontWeight: 600, \r\n                                marginBottom: '0.25rem' \r\n                            }}>\r\n                                Transaction Failed\r\n                            </p>\r\n                            <p style={{ \r\n                                color: '#dc2626', \r\n                                fontSize: '0.875rem',\r\n                                lineHeight: 1.5\r\n                            }}>\r\n                                {error}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                \r\n                {success && (\r\n                    <div style={{\r\n                        backgroundColor: '#dcfce7',\r\n                        border: '2px solid #22c55e',\r\n                        borderRadius: 'var(--radius)',\r\n                        padding: '1rem',\r\n                        marginBottom: '1.5rem',\r\n                        display: 'flex',\r\n                        alignItems: 'flex-start',\r\n                        gap: '0.75rem'\r\n                    }}>\r\n                        <span style={{ fontSize: '1.25rem', lineHeight: 1 }}>âœ…</span>\r\n                        <p style={{ \r\n                            color: '#15803d', \r\n                            fontWeight: 600,\r\n                            fontSize: '0.95rem'\r\n                        }}>\r\n                            {success}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n                <div style={{ marginBottom: '1.5rem' }}>\r\n                    <h3 style={{ fontSize: '0.95rem', fontWeight: 600, marginBottom: '1rem', color: '#1e293b' }}>Transaction Type</h3>\r\n                    <div style={{ display: 'flex', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer' }}>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"CHECKOUT\"\r\n                                checked={transactionType === 'CHECKOUT'}\r\n                                onChange={e => setTransactionType(e.target.value)}\r\n                                style={{ cursor: 'pointer' }}\r\n                            />\r\n                            <span>Take Products</span>\r\n                        </label>\r\n                        <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', cursor: 'pointer' }}>\r\n                            <input\r\n                                type=\"radio\"\r\n                                value=\"CHECKIN\"\r\n                                checked={transactionType === 'CHECKIN'}\r\n                                onChange={e => setTransactionType(e.target.value)}\r\n                                style={{ cursor: 'pointer' }}\r\n                            />\r\n                            <span>Return Products</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 100px', gap: '0.75rem', marginBottom: '1rem', alignItems: 'flex-end' }}>\r\n                    <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                        <label htmlFor=\"product\" style={{ display: 'block', marginBottom: '0.35rem', fontSize: '0.875rem', fontWeight: 500 }}>Product</label>\r\n                        <select\r\n                            id=\"product\"\r\n                            className=\"input\"\r\n                            value={currentProduct}\r\n                            onChange={e => setCurrentProduct(e.target.value)}\r\n                            style={{ fontSize: '0.875rem', padding: '0.5rem 0.75rem', width: '100%' }}\r\n                        >\r\n                            <option value=\"\">Select...</option>\r\n                            {transactionType === 'CHECKOUT' \r\n                                ? products.map(p => (\r\n                                    <option key={p.id} value={String(p.id)}>\r\n                                        {p.name} (Available: {p.quantity})\r\n                                    </option>\r\n                                ))\r\n                                : (outstanding && outstanding.length > 0)\r\n                                    ? outstanding.map(o => {\r\n                                        const product = products.find(p => p.id === o.product_id);\r\n                                        if (!product) return null;\r\n                                        return (\r\n                                            <option key={o.product_id} value={String(o.product_id)}>\r\n                                                {product.name} (Outstanding: {o.outstanding})\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                    : <option disabled>No items to return</option>\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                    \r\n                    <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                        <label htmlFor=\"quantity\" style={{ display: 'block', marginBottom: '0.35rem', fontSize: '0.875rem', fontWeight: 500 }}>\r\n                            Quantity\r\n                            {transactionType === 'CHECKIN' && currentProduct && (\r\n                                <span style={{ fontSize: '0.75rem', color: '#64748b', marginLeft: '0.5rem' }}>(Max: {getMaxReturnQuantity(currentProduct)})</span>\r\n                            )}\r\n                        </label>\r\n                        <input\r\n                            id=\"quantity\"\r\n                            type=\"number\"\r\n                            className=\"input\"\r\n                            min=\"1\"\r\n                            max={transactionType === 'CHECKIN' && currentProduct ? getMaxReturnQuantity(currentProduct) : undefined}\r\n                            value={currentQuantity}\r\n                            onChange={e => setCurrentQuantity(Math.max(1, parseInt(e.target.value) || 1))}\r\n                            style={{ fontSize: '0.875rem', padding: '0.5rem 0.75rem', width: '100%' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={addBulkItem}\r\n                        className=\"btn btn-primary\"\r\n                        style={{ padding: '0.5rem 1rem', fontSize: '0.875rem' }}\r\n                    >\r\n                        Add Item\r\n                    </button>\r\n                </div>\r\n\r\n                {transactionType === 'CHECKIN' && outstanding && outstanding.length > 0 && (\r\n                    <div style={{ marginBottom: '1.5rem', backgroundColor: '#eff6ff', border: '1px solid #93c5fd', borderRadius: 'var(--radius)', padding: '1rem' }}>\r\n                        <h3 style={{ fontSize: '0.95rem', fontWeight: 600, marginBottom: '0.75rem', color: '#1e40af' }}>ðŸ“‹ Products You Previously Took</h3>\r\n                        <div className=\"grid gap-2\">\r\n                            {outstanding.map(item => {\r\n                                const product = products.find(p => p.id === item.product_id);\r\n                                if (!product) return null;\r\n                                const alreadyInReturn = bulkItems.find(b => b.product_id === item.product_id);\r\n                                return (\r\n                                    <div key={item.product_id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '0.75rem', backgroundColor: '#ffffff', border: '1px solid #bfdbfe', borderRadius: '0.375rem' }}>\r\n                                        <div>\r\n                                            <span style={{ fontWeight: 600, color: '#1e293b' }}>{product.name}</span>\r\n                                            <span style={{ color: '#64748b', marginLeft: '0.75rem', fontSize: '0.875rem' }}>Outstanding: <span style={{ fontWeight: 600, color: '#2563eb' }}>{item.outstanding}</span></span>\r\n                                        </div>\r\n                                        {!alreadyInReturn ? (\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => {\r\n                                                    const productId = item.product_id;\r\n                                                    const product = products.find(p => p.id === productId);\r\n                                                    const existingIndex = bulkItems.findIndex(b => b.product_id === productId);\r\n                                                    const existingQty = existingIndex >= 0 ? bulkItems[existingIndex].quantity : 0;\r\n                                                    const requestedTotal = existingQty + 1;\r\n                                                    const maxQty = item.outstanding;\r\n\r\n                                                    if (requestedTotal > maxQty) {\r\n                                                        setError(`Cannot return ${requestedTotal} units. You only have ${maxQty} unit(s) outstanding for ${product.name}.`);\r\n                                                        return;\r\n                                                    }\r\n\r\n                                                    if (existingIndex >= 0) {\r\n                                                        // Update quantity if already exists\r\n                                                        const newBulkItems = [...bulkItems];\r\n                                                        newBulkItems[existingIndex].quantity = requestedTotal;\r\n                                                        setBulkItems(newBulkItems);\r\n                                                    } else {\r\n                                                        // Add new item with quantity 1\r\n                                                        setBulkItems([\r\n                                                            ...bulkItems,\r\n                                                            { product_id: productId, product_name: product.name, product_image: product.image_url, quantity: 1 },\r\n                                                        ]);\r\n                                                    }\r\n                                                    setError('');\r\n                                                }}\r\n                                                className=\"btn\"\r\n                                                style={{ backgroundColor: '#dbeafe', color: '#1e40af', border: 'none', fontSize: '0.75rem', padding: '0.35rem 0.75rem' }}\r\n                                            >\r\n                                                Quick Add\r\n                                            </button>\r\n                                        ) : (\r\n                                            <span style={{ fontSize: '0.75rem', color: '#059669', fontWeight: 600 }}>âœ… Added</span>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {bulkItems.length > 0 && (\r\n                    <div style={{ marginBottom: '1.5rem', backgroundColor: '#f8fafc', border: '1px solid #e2e8f0', borderRadius: 'var(--radius)', padding: '1rem' }}>\r\n                        <h3 style={{ fontSize: '0.95rem', fontWeight: 600, marginBottom: '1rem', color: '#1e293b' }}>Items to {transactionType === 'CHECKOUT' ? 'Take' : 'Return'} ({bulkItems.length})</h3>\r\n                        <div className=\"grid gap-2\">\r\n                            {bulkItems.map(item => (\r\n                                <div key={item.product_id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '0.75rem', backgroundColor: '#ffffff', border: '1px solid #e2e8f0', borderRadius: '0.375rem' }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                                        {item.product_image && (\r\n                                            <img\r\n                                                src={item.product_image}\r\n                                                alt={item.product_name}\r\n                                                style={{\r\n                                                    width: '40px',\r\n                                                    height: '40px',\r\n                                                    objectFit: 'cover',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    cursor: 'pointer',\r\n                                                    flexShrink: 0,\r\n                                                }}\r\n                                                onClick={() => setImagePreview(item.product_image)}\r\n                                            />\r\n                                        )}\r\n                                        <div>\r\n                                            <span style={{ fontWeight: 600, color: '#1e293b' }}>{item.quantity}x</span>\r\n                                            <span style={{ color: '#475569', marginLeft: '0.5rem' }}>{item.product_name}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => removeBulkItem(item.product_id)}\r\n                                        className=\"btn\"\r\n                                        style={{\r\n                                            backgroundColor: '#fee2e2',\r\n                                            color: '#991b1b',\r\n                                            border: 'none',\r\n                                            fontSize: '0.75rem',\r\n                                            padding: '0.35rem 0.75rem',\r\n                                            width: 'auto',\r\n                                            minWidth: 'auto'\r\n                                        }}\r\n                                    >\r\n                                        Remove\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Image Preview Modal */}\r\n                {imagePreview && (\r\n                    <div\r\n                        style={{\r\n                            position: 'fixed',\r\n                            inset: 0,\r\n                            backgroundColor: 'rgba(0,0,0,0.6)',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            zIndex: 1100,\r\n                        }}\r\n                        onClick={() => setImagePreview('')}\r\n                    >\r\n                        <div\r\n                            style={{\r\n                                backgroundColor: '#fff',\r\n                                padding: '1rem',\r\n                                borderRadius: '0.75rem',\r\n                                maxWidth: '90vw',\r\n                                maxHeight: '90vh',\r\n                                boxShadow: 'var(--shadow-lg)',\r\n                            }}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            <img\r\n                                src={imagePreview}\r\n                                alt=\"Product image\"\r\n                                style={{ maxWidth: '80vw', maxHeight: '80vh', objectFit: 'contain', display: 'block' }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={handleSubmit} disabled={bulkItems.length === 0} style={{ width: '100%', opacity: bulkItems.length === 0 ? 0.5 : 1, cursor: bulkItems.length === 0 ? 'not-allowed' : 'pointer' }}>\r\n                    Complete {transactionType === 'CHECKOUT' ? 'Checkout' : 'Return'} ({bulkItems.length} items)\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}