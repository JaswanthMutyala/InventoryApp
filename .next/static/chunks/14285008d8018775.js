(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76087,e=>{e.v({backLink:"admin-module__aXBbkG__backLink",container:"admin-module__aXBbkG__container",dangerBtn:"admin-module__aXBbkG__dangerBtn",error:"admin-module__aXBbkG__error",formGroup:"admin-module__aXBbkG__formGroup",panel:"admin-module__aXBbkG__panel",section:"admin-module__aXBbkG__section",success:"admin-module__aXBbkG__success",warning:"admin-module__aXBbkG__warning"})},77844,e=>{"use strict";var r=e.i(43476),a=e.i(71645),o=e.i(18566),n=e.i(76087);function s(){let e=(0,o.useRouter)(),[s,t]=(0,a.useState)(""),[i,d]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[f,b]=(0,a.useState)({adminCount:0,memberCount:0}),[g,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=JSON.parse(localStorage.getItem("user")||"{}"),r=await fetch("/api/users",{headers:{Authorization:`Bearer ${e.id}`}});if(r.ok){let e=await r.json(),a=e.filter(e=>"admin"===e.role).length,o=e.filter(e=>"member"===e.role).length;b({adminCount:a,memberCount:o})}}catch(e){console.error("Error fetching stats:",e)}finally{h(!1)}},x=async()=>{if(!s)return void u("Please enter admin password");if(window.confirm(" This will permanently delete ALL history and inventory! Are you sure?")){d(!0),c(""),u("");try{let r=await fetch("/api/admin/clear-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s})}),a=await r.json();r.ok?(c(" Database cleared successfully!"),t(""),setTimeout(()=>{e.push("/")},2e3)):u(a.error||"Failed to clear database")}catch(e){u("Error: "+e.message)}finally{d(!1)}}};return(0,r.jsx)("div",{className:n.default.container,children:(0,r.jsxs)("div",{className:n.default.panel,children:[(0,r.jsx)("h1",{children:" Admin Panel"}),!g&&(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"#dbeafe",border:"2px solid #3b82f6",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#3b82f6"},children:f.adminCount}),(0,r.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Admin Users"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"#dcfce7",border:"2px solid #22c55e",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#22c55e"},children:f.memberCount}),(0,r.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Member Users"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"#f3e8ff",border:"2px solid #a855f7",borderRadius:"var(--radius)",padding:"1.5rem",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#a855f7"},children:f.adminCount+f.memberCount}),(0,r.jsx)("div",{style:{color:"#666",fontSize:"0.875rem",marginTop:"0.5rem"},children:"Total Users"})]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"#f0f4ff",border:"2px solid #3b82f6",borderRadius:"var(--radius)",padding:"1.5rem",marginBottom:"2rem",textAlign:"center"},children:[(0,r.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"ðŸ‘¥ Manage Members"}),(0,r.jsx)("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.875rem"},children:"View all registered users, add or remove members"}),(0,r.jsx)("a",{href:"/members",style:{display:"inline-block",backgroundColor:"#3b82f6",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",textDecoration:"none",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:e=>e.target.style.backgroundColor="#2563eb",onMouseOut:e=>e.target.style.backgroundColor="#3b82f6",children:"Go to Members Page â†’"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"#f0fdf4",border:"2px solid #22c55e",borderRadius:"var(--radius)",padding:"1.5rem",marginBottom:"2rem",textAlign:"center"},children:[(0,r.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"ðŸ“Š Access Logs"}),(0,r.jsx)("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.875rem"},children:"View all members and admins who have accessed the system"}),(0,r.jsx)("a",{href:"/access-logs",style:{display:"inline-block",backgroundColor:"#22c55e",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",textDecoration:"none",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:e=>e.target.style.backgroundColor="#16a34a",onMouseOut:e=>e.target.style.backgroundColor="#22c55e",children:"View Access Logs â†’"})]}),(0,r.jsxs)("div",{className:n.default.section,children:[(0,r.jsx)("h2",{children:"âš ï¸ Danger Zone"}),(0,r.jsx)("p",{className:n.default.warning,children:"Clear all transaction history and inventory from the database. This action cannot be undone!"}),(0,r.jsxs)("div",{className:n.default.formGroup,children:[(0,r.jsx)("label",{children:"Admin Password:"}),(0,r.jsx)("input",{type:"password",value:s,onChange:e=>t(e.target.value),placeholder:"Enter admin password",disabled:i,onKeyPress:e=>"Enter"===e.key&&x()})]}),m&&(0,r.jsx)("div",{className:n.default.error,children:m}),l&&(0,r.jsx)("div",{className:n.default.success,children:l}),(0,r.jsx)("button",{onClick:x,disabled:i,className:n.default.dangerBtn,children:i?"Clearing...":" Clear All Data"})]}),(0,r.jsx)("div",{className:n.default.backLink,children:(0,r.jsx)("a",{href:"/",children:"â† Back to Dashboard"})})]})})}e.s(["default",()=>s])}]);