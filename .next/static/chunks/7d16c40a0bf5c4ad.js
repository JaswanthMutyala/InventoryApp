(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29156,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(18566);function s(){let e=(0,a.useRouter)(),[s,r]=(0,i.useState)(null),[n,l]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(null),[u,p]=(0,i.useState)({name:"",description:"",quantity:0,image_url:""}),[x,h]=(0,i.useState)({show:!1,productId:null,productName:""}),[g,b]=(0,i.useState)(!1),[y,j]=(0,i.useState)(""),[f,v]=(0,i.useState)(!1),[N,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let t=localStorage.getItem("user");t?(r(JSON.parse(t)),C()):e.push("/login")},[e]);let C=async()=>{let e=await fetch("/api/products");l(await e.json())},S=s?.role==="admin",k=async e=>{if(e.preventDefault(),!u.image_url&&!o)return void alert("Please provide an image URL for this product");let t=o?`/api/products/${c.id}`:"/api/products",i={name:u.name,description:u.description||"",quantity:u.quantity||0,user_id:s.id,image_url:u.image_url},a=await fetch(t,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});a.ok?(C(),d(!1),m(null),p({name:"",description:"",quantity:0,image_url:""})):alert((await a.json()).error||"Failed to save product")},I=async()=>{if(x.productId){b(!0);try{let e=await fetch(`/api/products/${x.productId}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.id})});if(e.ok)C(),h({show:!1,productId:null,productName:""});else{let t=await e.json();alert(t.error||"Failed to delete product")}}catch(e){alert("Error: "+e.message)}finally{b(!1)}}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"section-title",children:"Inventory Management"}),(0,t.jsx)("div",{className:"badge badge-primary",children:S?"Admin":"Member"})]}),S&&(0,t.jsxs)("div",{className:"card mb-6",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:N?"1rem":0},children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:o?"Edit Product":"Add New Product"}),(0,t.jsx)("button",{type:"button",onClick:()=>w(e=>!e),style:{background:"none",border:"1px solid #e5e7eb",borderRadius:"999px",padding:"0.25rem 0.75rem",fontSize:"0.8rem",cursor:"pointer",color:"#4b5563"},children:N?"Hide":"Show"})]}),N&&(0,t.jsxs)("form",{onSubmit:k,className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Product Name"}),(0,t.jsx)("input",{className:"input",placeholder:"Product Name",value:u.name,onChange:e=>p({...u,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Description"}),(0,t.jsx)("input",{className:"input",placeholder:"Description",value:u.description,onChange:e=>p({...u,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Quantity"}),(0,t.jsx)("input",{type:"number",className:"input",placeholder:"Quantity",value:u.quantity,onChange:e=>p({...u,quantity:parseInt(e.target.value)||0}),required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.35rem",fontSize:"0.875rem",fontWeight:500},children:"Image URL"}),(0,t.jsx)("input",{className:"input",placeholder:"https://example.com/image.jpg",value:u.image_url,onChange:e=>p({...u,image_url:e.target.value}),required:!o})]}),(0,t.jsxs)("div",{className:"flex gap-2",style:{gridColumn:"1 / -1"},children:[(0,t.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[o?"Update":"Add"," Product"]}),o&&(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{d(!1),m(null),p({name:"",description:"",quantity:0,image_url:""})},children:"Cancel"})]})]})]}),0===n.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Product List"}),(0,t.jsx)("div",{className:"card",style:{textAlign:"center"},children:(0,t.jsx)("p",{className:"text-sm text-secondary",children:"No products are available at the moment."})})]}):(0,t.jsx)("div",{className:"grid gap-4",children:n.map(e=>(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex-1",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.image_url&&(0,t.jsx)("img",{src:e.image_url,alt:e.name,style:{width:"56px",height:"56px",objectFit:"cover",borderRadius:"0.5rem",cursor:"pointer",flexShrink:0},onClick:()=>j(e.image_url)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-secondary",children:e.description}),(0,t.jsxs)("p",{className:"text-sm mt-2",children:["Quantity: ",(0,t.jsx)("span",{className:"font-bold text-primary",children:e.quantity})]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{d(!0),m(e),p({...e})},className:"btn btn-secondary",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{h({show:!0,productId:e.id,productName:e.name})},className:"btn btn-danger",disabled:g,children:"Delete"})]})})]})},e.id))}),y&&(0,t.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},onClick:()=>j(""),children:(0,t.jsx)("div",{style:{backgroundColor:"#fff",padding:"1rem",borderRadius:"0.75rem",maxWidth:"90vw",maxHeight:"90vh",boxShadow:"var(--shadow-lg)"},onClick:e=>e.stopPropagation(),children:(0,t.jsx)("img",{src:y,alt:"Product image",style:{maxWidth:"80vw",maxHeight:"80vh",objectFit:"contain",display:"block"}})})}),x.show&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,t.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"30px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%",textAlign:"center"},children:[(0,t.jsx)("h2",{style:{marginBottom:"20px",color:"#1f2937",fontSize:"18px"},children:"Are you sure you want to delete this product?"}),(0,t.jsxs)("p",{style:{marginBottom:"25px",color:"#6b7280",fontSize:"14px"},children:[(0,t.jsx)("strong",{children:x.productName})," will be permanently removed."]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[(0,t.jsx)("button",{onClick:I,disabled:g,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:g?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",opacity:g?.6:1},children:g?"Deleting...":"Delete"}),(0,t.jsx)("button",{onClick:()=>{h({show:!1,productId:null,productName:""})},disabled:g,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:g?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",opacity:g?.6:1},children:"Cancel"})]})]})})]})}e.s(["default",()=>s])}]);