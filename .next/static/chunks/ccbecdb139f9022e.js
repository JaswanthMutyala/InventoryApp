(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79628,e=>{"use strict";var t=e.i(43476),l=e.i(71645),r=e.i(18566);let n=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";function i(){let e=(0,r.useRouter)(),[i,o]=(0,l.useState)(null),[s,a]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[h,u]=(0,l.useState)({userName:"",productName:"All",date:"",type:"All"});(0,l.useEffect)(()=>{let t=localStorage.getItem("user");if(t){let e=JSON.parse(t);o(e),x(e)}else e.push("/login")},[e]);let x=async e=>{try{let[e,t]=await Promise.all([fetch("/api/transactions"),fetch("/api/products")]),l=await e.json(),r=await t.json();c(r),a(l)}catch(e){console.error("Failed to fetch data",e)}finally{p(!1)}},f=e=>{let{name:t,value:l}=e.target;u(e=>({...e,[t]:l}))},g=s.filter(e=>{let t=d.find(t=>t.id===e.product_id)?.name||"Unknown Product";return(""===h.userName||e.user_name?.toLowerCase().includes(h.userName.toLowerCase()))&&("All"===h.productName||t===h.productName)&&(""===h.date||n(e.timestamp)===h.date)&&("All"===h.type||e.type===h.type)});return!i||m?null:(0,t.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,t.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"1.5rem",color:"#1e293b"},children:"Transaction History"}),(0,t.jsx)("div",{className:"card",style:{marginBottom:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,t.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"User Name"}),(0,t.jsx)("input",{type:"text",name:"userName",value:h.userName,onChange:f,className:"input",placeholder:"Search...",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem"}})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,t.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Product"}),(0,t.jsxs)("select",{name:"productName",value:h.productName,onChange:f,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"All",children:"All"}),d.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,t.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Date"}),(0,t.jsx)("input",{type:"date",name:"date",value:h.date,onChange:f,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem"}})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,t.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Type"}),(0,t.jsxs)("select",{name:"type",value:h.type,onChange:f,className:"input",style:{padding:"0.625rem 0.75rem",fontSize:"0.875rem",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"All",children:"All"}),(0,t.jsx)("option",{value:"CHECKOUT",children:"Checkout"}),(0,t.jsx)("option",{value:"CHECKIN",children:"Return"})]})]})]})}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"#1e293b"},children:"Transaction History"}),g.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"User Name"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Product"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Quantity"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Type"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"#64748b"},children:"Date"})]})}),(0,t.jsx)("tbody",{children:g.map((e,l)=>{let r=d.find(t=>t.id===e.product_id)?.name||"Unknown Product",i="CHECKOUT"===e.type?"took":"return";return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#1e293b"},children:e.user_name||"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#1e293b"},children:r}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:e.quantity}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:i}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#1e293b"},children:n(e.timestamp)})]},l)})})]})}):(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:(0,t.jsx)("p",{children:"No transactions yet"})})]})]})}e.s(["default",()=>i])}]);